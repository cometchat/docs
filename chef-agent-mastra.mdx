---
title: "Build Your Chef Agent with Mastra"
description: "Follow these steps to wrap up a culinary‑wise Mastra agent that helps users cook with what’s in their pantry—and get it ready to deploy with a slick React chat UI."
---

# Build Your Chef Agent with Mastra

Imagine a virtual sous‑chef who listens to your ingredient list and responds with suggestion, technique, or even a full‑blown recipe—all served via a slick chat UI.

---

## What You’ll Build

* A Mastra agent that thinks like a seasoned home cook.
* Tools (actions) for helpful interactive features—substitute ingredients, view recipes, generate shopping lists.
* A conversational UI embedded using a React Chat Widget (with optional CometChat).
* A deployable chat component, ready to plug into your app or site.

---

## Prerequisites

* A Mastra account with agent‑maker access.
* Node.js project scaffold (TypeScript or JavaScript).
* OpenAI API key in `OPENAI_API_KEY` environment variable.
* A React app (or any front‑end) for integration.
* Optional: Familiarity with Zod schema for structured output.

---

## Step 1  
### Define Your Chef Agent

Declare your AI chef using Mastra’s toolkit. In `src/mastra/chefAgent.ts`:

```ts
import { defineAgent } from "mastra";

export const chefAgent = defineAgent({
  name: "Chef Agent",
  instructions: "You are a friendly, clever home chef. Help users cook meals based on the ingredients they have. Offer substitutions if needed, and respond with steps.",
  tools: [
    {
      name: "suggest_substitute",
      description: "Suggest a substitute for an ingredient.",
      parameters: {
        type: "object",
        required: ["ingredient"],
        properties: {
          ingredient: { type: "string" },
        },
      },
    },
  ],
});
```

---

## Step 2  
### Stand Up the Agent Server

In `server.ts`, wrap your agent in a simple HTTP endpoint:

```ts
import express from "express";
import { chefAgent } from "./mastra/chefAgent";

const app = express();
app.use(express.json());

app.post("/mastra/chef-agent", async (req, res) => {
  const { messages } = req.body;
  const result = await chefAgent.respond({ messages });
  res.json(result);
});

const port = process.env.PORT || 3000;
app.listen(port, () => console.log(`Chef Agent ready on port ${port}`));
```

Deploy this (Vercel, Render, Fly, etc.) and copy the public URL to use as your **Deployment URL**. Also note your **Mastra Agent ID** from the dashboard.

---

## Step 3 (Optional)  
### Add Frontend Actions (Tools) 

Sleeve‑roll optionality: let your chef send interactive “cooking actions” to UI—like showing substitutions or saving recipes.

In Mastra console under “Actions,” add an action:

* **Display Name**: Suggest substitute
* **Name (code)**: `suggest_substitute`
* **Description**: “Recommend an alternative ingredient.”
* **Parameters Schema**:
```json
{
  "type": "object",
  "required": ["ingredient"],
  "properties": {
    "ingredient": { "type": "string", "description": "Ingredient to substitute" }
  }
}
```

On the UI side, listen for this action and display suggestions in context.

---

## Step 4  
### Test Your Agent Manually

Use a client or straight `curl` to feed your agent some ingredient chatter:

```bash
curl -X POST https://<your-deployment>/mastra/chef-agent   -H "Content-Type: application/json"   -d '{
    "messages": [
      { "role": "user", "content": "I have potatoes, garlic, and olive oil—what can I make?" }
    ]
  }'
```

Expect a response with a recipe idea or directions. If it invokes your tool, your UI should catch that and act.

---

## Step 5  
### Embed in Your UI (React Widget)

In your React app, turn chefAgent into a chat experience. For example:

```tsx
import { Chat } from "@your-chat-ui";
import React from "react";

export function ChefChat() {
  return (
    <Chat
      endpoint="https://<your-deployment>/mastra/chef-agent"
      agentName="Chef Agent"
      onAction={(action) => {
        if (action.name === "suggest_substitute") {
          alert(`Try substituting "${action.params.ingredient}" with something local!`);
        }
      }}
    />
  );
}
```

Paste this into your app and watch your kitchen agent spring to life.

---

## Quick Mastra Setup (For Reference)

```ts
// src/mastra/chefAgent.ts
import { defineAgent } from "mastra";
export const chefAgent = defineAgent({
  name: "Chef Agent",
  instructions: "You are a helpful cooking assistant—use your chef tricks to answer.",
  tools: [ /* same as above */ ],
});
```

---

## Test Checklist

* Agent responds accurately to ingredient queries.
* Optional substitute actions appear and get handled by your UI.
* Agent maintains tone—helpful, inventive, clever.
* UI is styled so conversation feels like cooking together.

---

## Troubleshooting

* **No response**? Check that your Deployment URL is live, the server is running, and there are no console errors.
* **Tool not firing**? Ensure tool `name` matches exactly, and your UI listens for that name in action callbacks.
* **Api key errors**? Confirm `OPENAI_API_KEY` is set correctly and env vars are loaded on your server.

---

## Next Steps

* Add actions like “Add to shopping list,” “Scale recipe,” or “Switch diet style (vegan/vegetarian).”
* Use Zod schema to return structured JSON (ingredients, steps, cooking time).
* Localize responses or theme the UI for fun (spicy vs mild).
* Track analytics: popular queries, tool usage, user satisfaction.

---
