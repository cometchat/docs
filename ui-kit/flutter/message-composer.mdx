---
title: "Message Composer"
---

<Info>
`CometChatMessageComposer` is a [Widget](/ui-kit/flutter/components-overview#components) that enables users to write and send a variety of messages, including text, image, video, and custom messages.
</Info>

<Note>
Features such as **Live Reaction**, **Attachments**, and **Message Editing** are also supported by it.
</Note>

<Frame>
  <img src="/images/8becc772-message_composer-0cc03defaf535f332f7f8bb1ebd65392.png" />
</Frame>

`CometChatMessageComposer` is comprised of the following [Base Widgets](/ui-kit/flutter/components-overview#base-components):

| Base Widgets                                       | Description                                                                                                         |
| -------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| [MessageInput](/ui-kit/flutter/message-input) | This provides a basic layout for the contents of this component, such as the TextField and buttons                  |
| [ActionSheet](/ui-kit/flutter/action-sheet)   | The ActionSheet widget presents a list of options in either a list or grid mode, depending on the user's preference |

---

## Usage

### Integration


You can launch `CometChatMessageComposer` directly using `Navigator.push`, or you can define it as a widget within the `build` method of your `State` class.

<AccordionGroup>
<Accordion title="Using Navigator" icon="location-arrow">
Using Navigator to Launch `CometChatMessageComposer`

<Tabs>
<Tab title="Dart">
```dart
Navigator.push(context, MaterialPageRoute(builder: (context) => CometChatMessageComposer())); // A user or group object is required to launch this widget.
```

</Tab>

</Tabs>

</Accordion>
<Accordion title="Embedding as Widget" icon="layer-group">
Embedding `CometChatMessageComposer` as a Widget in the build Method

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
import 'package:cometchat_chat_uikit/cometchat_chat_uikit.dart';
import 'package:flutter/material.dart';

class MessageComposer extends StatefulWidget {
  const MessageComposer({super.key});

  @override
  State<MessageComposer> createState() => _MessageComposerState();
}

class _MessageComposerState extends State<MessageComposer> {

  @override
  Widget build(BuildContext context) {
    return Scaffold(
        body: SafeArea(
            child: Column(
              children: [
                const Spacer(),
                CometChatMessageComposer()
              ],
            ) // A user or group object is required to launch this widget.
        )
    );
  }
}
```
</Accordion>
</Tab>

</Tabs>
</Accordion>
</AccordionGroup>
## Actions

[Actions](/ui-kit/flutter/components-overview#actions) dictate how a widget functions. They are divided into two types: Predefined and User-defined. You can override either type, allowing you to tailor the behavior of the widget to fit your specific needs.

<AccordionGroup>
<Accordion title="OnSendButtonClick">
The `OnSendButtonClick` event gets activated when the send message button is clicked. It has a predefined function of sending messages entered in the composer `EditText`. However, you can overide this action with the following code snippet.

<Tabs>
<Tab title="Dart">
```dart
CometChatMessageComposer(
  user: user,
  onSendButtonTap: (BuildContext context, BaseMessage baseMessage, PreviewMessageMode? previewMessageMode) {
    // TODO("Not yet implemented")
  },
)
```

</Tab>

</Tabs>

</Accordion>

<Accordion title="onChange">
This action handles changes in the value of text in the input field of the CometChatMessageComposer widget.

<Tabs>
<Tab title="Dart">
```dart
CometChatMessageComposer(
  user: user,
  onChange: (String? text) {
    // TODO("Not yet implemented")
  },
)
```

</Tab>

</Tabs>


</Accordion>

<Accordion title="onError">

This action doesn't change the behavior of the widget but rather listens for any errors that occur in the MessageList widget.

<Tabs>
<Tab title="Dart">
```dart
CometChatMessageComposer(
  user: user,
  onError: (e) {
    // TODO("Not yet implemented")
  },
)
```

</Tab>

</Tabs>


</Accordion>
</AccordionGroup>
## Filters

<Note>
`CometChatMessageComposer` widget does not have any available filters.
</Note>
## Events


[Events](/ui-kit/flutter/components-overview#events) are emitted by a `Widget`. By using event you can extend existing functionality. Being global events, they can be applied in Multiple Locations and are capable of being Added or Removed.
<Note>
The `CometChatMessageComposer` Widget does not emit any events of its own.
</Note>

## Customization

<Info>
To fit your app's design requirements, you can customize the appearance of the `CometChatMessageComposer` widget. We provide exposed methods that allow you to modify the experience and behavior according to your specific needs.
</Info>

<AccordionGroup>
<Accordion title="Style">

Using Style you can customize the look and feel of the widget in your app, These parameters typically control elements such as the color, size, shape, and fonts used within the widget.

<AccordionGroup>
<Accordion title="CometChatMessageComposerStyle">
To modify the styling, you can apply the `CometChatMessageComposerStyle` to the `CometChatMessageComposer` Widget using the `messageComposerStyle` property.

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
CometChatMessageComposer(
  user: user,
  messageComposerStyle: CometChatMessageComposerStyle(
      sendButtonIconBackgroundColor: Color(0xFFF76808),
      secondaryButtonIconColor: Color(0xFFF76808),
      auxiliaryButtonIconColor: Color(0xFFF76808)
    )
)
```
</Accordion>
</Tab>

</Tabs>

<Frame>
  <img src="/images/043969b6-message_composer_styling-7a7256fcf47f1835a442e450f03503fe.png" />
</Frame>

</Accordion>

<Accordion title="MediaRecorder Style">

To customize the styles of the MediaRecorder widget within the `CometChatMessageComposer` Widget, use the `mediaRecorderStyle` property. For more details, please refer to [MediaRecorder](/ui-kit/flutter/component-styling#media-recorder) styles.

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
CometChatMessageComposer(
  user: user,
  messageComposerStyle: CometChatMessageComposerStyle(
  mediaRecorderStyle: CometChatMediaRecorderStyle(
            recordIndicatorBackgroundColor: Color(0xFFF44649),
            recordIndicatorBorderRadius: BorderRadius.circular(20),
            pauseButtonBorderRadius: BorderRadius.circular(8),
            deleteButtonBorderRadius: BorderRadius.circular(8),
            stopButtonBorderRadius: BorderRadius.circular(8),
          ),
  ),
)
```
</Accordion>
</Tab>

</Tabs>

<Frame>
  <img src="/images/49938d8d-media_recorder_styling-fa79c9f0c778829f84dc3f69ed3a96a7.png" />
</Frame>

</Accordion>

<Accordion title="AI Options Style"> 
To customize the styles of the AI Options widget within the `CometChatMessageComposer` Widget, use the `aiOptionStyle`.

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
CometChatMessageComposer(
  user: user,
messageComposerStyle: CometChatMessageComposerStyle(
                      aiOptionStyle: AIOptionsStyle(
                        backgroundColor: Color(0xFFE4EBF5),
                        border: Border.all(width: 3, color: Colors.red),
                      )
                  ),
)
```
</Accordion>
</Tab>

</Tabs>

</Accordion>
</AccordionGroup>

</Accordion>

<Accordion title="Functionality">
These are a set of small functional customizations that allow you to fine-tune the overall experience of the widget. With these, you can change text, set custom icons, and toggle the visibility of UI elements.

<Frame>
  <img src="/images/8becc772-message_composer-0cc03defaf535f332f7f8bb1ebd65392.png" />
</Frame>

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
CometChatMessageComposer(
  user: user,
  placeholderText: "Type a message...",
  disableMentions: true,
)
```
</Accordion>
</Tab>

</Tabs>

Below is a list of customizations along with corresponding code snippets

## Message Composer Properties

| Property                            | Data Type                                                   | Description                                                  |
| ----------------------------------- | ----------------------------------------------------------- | ------------------------------------------------------------ |
| `user`                              | `User?`                                                     | Sets user for the message composer.                          |
| `group`                             | `Group?`                                                    | Sets group for the message composer.                         |
| `messageComposerStyle`              | `CometChatMessageComposerStyle?`                            | Sets style for the message composer.                         |
| `placeholderText`                   | `String?`                                                   | Hint text for the input field.                               |
| `text`                              | `String?`                                                   | Initial text for the input field.                            |
| `onChange`                          | `Function(String text)?`                                    | Callback triggered when text changes.                        |
| `textEditingController`             | `TextEditingController?`                                    | Controls the state of the text field.                        |
| `maxLine`                           | `int?`                                                      | Maximum number of lines allowed in the input field.          |
| `disableMentions`                   | `bool?`                                                     | Disables mentions in the composer.                           |
| `disableTypingEvents`               | `bool`                                                      | Disables typing events.                                      |
| `disableSoundForMessages`           | `bool`                                                      | Disables sound for sent messages.                            |
| `customSoundForMessage`             | `String?`                                                   | URL for custom sound when a message is sent.                 |
| `customSoundForMessagePackage`      | `String?`                                                   | Package name for the custom sound.                           |
| `parentMessageId`                   | `int`                                                       | ID of the parent message (default is 0).                     |
| `padding`                           | `EdgeInsetsGeometry?`                                       | Sets padding for the message composer.                       |
| `messageInputPadding`               | `EdgeInsetsGeometry?`                                       | Sets padding for the message input field.                    |
| `sendButtonView`                    | `Widget?`                                                   | Custom send button widget.                                   |
| `attachmentIcon`                    | `Widget?`                                                   | Custom attachment icon.                                      |
| `attachmentIconURL`                 | `String?`                                                   | URL of the attachment icon.                                  |
| `voiceRecordingIcon`                | `Widget?`                                                   | Custom voice recording icon.                                 |
| `aiIcon`                            | `Widget?`                                                   | Custom AI button icon.                                       |
| `aiIconURL`                         | `String?`                                                   | URL for the AI button icon.                                  |
| `aiIconPackageName`                 | `String?`                                                   | Package name for the AI icon.                                |
| `auxiliaryButtonView`               | `ComposerWidgetBuilder?`                                    | UI component forwarded to message input as auxiliary button. |
| `secondaryButtonView`               | `ComposerWidgetBuilder?`                                    | UI component forwarded to message input as secondary button. |
| `auxiliaryButtonsAlignment`         | `AuxiliaryButtonsAlignment?`                                | Controls position of auxiliary button view.                  |
| `hideVoiceRecordingButton`          | `bool?`                                                     | Option to hide the voice recording button.                   |
| `recorderStartButtonIcon`           | `Widget?`                                                   | Custom start button icon for the recorder.                   |
| `recorderPauseButtonIcon`           | `Widget?`                                                   | Custom pause button icon for the recorder.                   |
| `recorderDeleteButtonIcon`          | `Widget?`                                                   | Custom delete button icon for the recorder.                  |
| `recorderStopButtonIcon`            | `Widget?`                                                   | Custom stop button icon for the recorder.                    |
| `recorderSendButtonIcon`            | `Widget?`                                                   | Custom send button icon for the recorder.                    |
| `attachmentOptions`                 | `ComposerActionsBuilder?`                                   | Provides options for file attachments.                       |
| `hideAttachmentButton`              | `bool?`                                                     | Hide/display attachment button.                              |
| `hideImageAttachmentOption`         | `bool?`                                                     | Hide/display image attachment option.                        |
| `hideVideoAttachmentOption`         | `bool?`                                                     | Hide/display video attachment option.                        |
| `hideAudioAttachmentOption`         | `bool?`                                                     | Hide/display audio attachment option.                        |
| `hideFileAttachmentOption`          | `bool?`                                                     | Hide/display file attachment option.                         |
| `hidePollsOption`                   | `bool?`                                                     | Hide/display polls option.                                   |
| `hideCollaborativeDocumentOption`   | `bool?`                                                     | Hide/display collaborative document option.                  |
| `hideCollaborativeWhiteboardOption` | `bool?`                                                     | Hide/display collaborative whiteboard option.                |
| `hideTakePhotoOption`               | `bool?`                                                     | Hide/display take photo option.                              |
| `onSendButtonTap`                   | `Function(BuildContext, BaseMessage, PreviewMessageMode?)?` | Callback triggered when the send button is tapped.           |
| `onError`                           | `OnError?`                                                  | Callback to handle errors.                                   |
| `stateCallBack`                     | `Function(CometChatMessageComposerController controller)?`  | Callback to manage state of the message composer.            |
| `hideSendButton`                    | `bool?`                                                     | Hide/display the send button.                                |
| `hideStickersButton`                | `bool?`                                                     | Hide/display the sticker button.                             |
| `sendButtonIcon`                    | `Widget?`                                                   | Custom send button icon.                                     |

</Accordion>
<Accordion title="Advanced Customization">

For advanced-level customization, you can set custom widgets to the widget. This lets you tailor each aspect of the widget to fit your exact needs and application aesthetics. You can create and define your widgets and then incorporate those into the widget.

<AccordionGroup>
<Accordion title="TextFormatters">
Assigns the list of text formatters. If the provided list is not null, it sets the list. Otherwise, it assigns the default text formatters retrieved from the data source. To configure the existing Mentions look and feel check out [CometChatMentionsFormatter](/ui-kit/flutter/mentions-formatter-guide)

**Example**

Here is the complete example for reference:

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
CometChatMessageComposer(
  user: user,
  textFormatters: [
       CometChatMentionsFormatter(
              style: CometChatMentionsStyle(
                     mentionSelfTextBackgroundColor: Color(0xFFF76808),
                     mentionTextBackgroundColor: Colors.white,
                     mentionTextColor: Colors.black,
                     mentionSelfTextColor: Colors.white,
                    )
          )
    ],
)
```
</Accordion>
</Tab>

</Tabs>

<Frame>
  <img src="/images/74b20b0e-mentions_styling-8e36e26282f4facd7920dc23ca98b832.png" />
</Frame>

</Accordion>
<Accordion title="AttachmentOptions">
By using `attachmentOptions`, you can set a list of custom `MessageComposerActions` for the `CometChatMessageComposer` Widget. This will override the existing list of `MessageComposerActions`.

**Example**

Here is the complete example for reference:

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
CometChatMessageComposer(
  user: user,
  attachmentOptions: (context, user, group, id) {
      return <CometChatMessageComposerAction>[
            CometChatMessageComposerAction(
                  id: "Custom Option 1",
                  title: "Custom Option 1",
                  icon: Icon(
                    Icons.play_circle,
                    color: Colors.black,
                  ),
              ),
            CometChatMessageComposerAction(
                  id: "Custom Option 2",
                  title: "Custom Option 2",
                  icon: Icon(
                    Icons.add_box,
                    color: Colors.black,
                  ),
              ),
            CometChatMessageComposerAction(
                  id: "Custom Option 3",
                  title: "Custom Option 3",
                  icon: Icon(
                    Icons.change_circle,
                    color: Colors.black,
                  ),
              ),
            CometChatMessageComposerAction(
                  id: "Custom Option 4",
                  title: "Custom Option 4",
                  icon: Icon(
                    Icons.sunny,
                    color: Colors.black,
                  ),
             )
          ];
      },
)
```
</Accordion>
</Tab>

</Tabs>

<Frame>
  <img src="/images/eea29772-message_composer_attachment_options-ab5eae6da0f195703f49ba9ec8530478.png" />
</Frame>

</Accordion>
<Accordion title="AuxiliaryButton Widget">
You can insert a custom widget into the `CometChatMessageComposer` widget to add additional functionality using the `auxiliaryButtonView` property.

**Example**

Here is the complete example for reference:

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
CometChatMessageComposer(
    user: user,
    auxiliaryButtonView: (context, user, group, id) {
              final existingAuxiliaryOptions = CometChatUIKit.getDataSource()
                  .getAuxiliaryOptions(user, group, context, id, Color(0xFFA1A1A1));
              return Row(
                children: [
                  existingAuxiliaryOptions,
                  Icon(
                    Icons.location_pin,
                    color: Color(0xFF6852D6),
                  ),
                ],
        );
    },
)
```
</Accordion>
</Tab>

</Tabs>

<Frame>
  <img src="/images/760f4e78-message_composer_auxiliary_button_view-45b18989e80744e3575835a0ea1c94bc.png" />
</Frame>

</Accordion>
<Accordion title="SecondaryButton Widget">
You can add a custom widget into the SecondaryButton widget for additional functionality using the `secondaryButtonView` property.

**Example**

Here is the complete example for reference:

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
CometChatMessageComposer(
    user: user,
    secondaryButtonView: (context, user, group, id) {
        return Icon(
            Icons.attach_file,
            color: Color(0xFF6852D6),
          );
    }
)
```
</Accordion>
</Tab>

</Tabs>

<Frame>
  <img src="/images/bfeef4fd-message_composer_secondary_button_view-2475998888cdeda382dcca63bd6e6fea.png" />
</Frame>

</Accordion>
<Accordion title="SendButton Widget">

You can set a custom widget in place of the already existing send button widget. Using the `sendButtonView` property.

**Example**

Here is the complete example for reference:

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
 CometChatMessageComposer(
      user: user,
      sendButtonView: IconButton(
          onPressed: () {},
          padding: EdgeInsets.all(4),
          style: IconButton.styleFrom(
              alignment: Alignment.center,
              backgroundColor: Color(0xFFEDEAFA),
              shape: RoundedRectangleBorder(
                borderRadius: BorderRadius.circular(4),
              )),
          icon: Transform.rotate(
                    angle: 150,
                    child: Icon(
                         Icons.send,
                         size: 20,
                         color: Color(0xFF6852D6),
                      ),
                )
      ),
    )
```
</Accordion>
</Tab>

</Tabs>

<Frame>
  <img src="/images/a1443834-message_composer_send_button_view-e026ff73573367da69b1fdb6b762e659.png" />
</Frame>

</Accordion>
<Accordion title="Header Widget">
You can set custom headerView to the `CometChatMessageComposer` widget using the `headerView` property

**Example**

Here is the complete example for reference:

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
CometChatMessageComposer(
      user: user,
      headerView: (context, user, group, id) {
        return Container(
          margin: EdgeInsets.only(
              bottom: 2,
              left: 8,
              right: 8),
          padding: EdgeInsets.all(8),
          decoration: BoxDecoration(
            color: Color(0xFFEDEAFA),
            borderRadius: BorderRadius.circular(8),
          ),
          child: Row(
            children: [
              Icon(
                Icons.volume_off,
                size: 20,
                color: Color(0xFF6852D6),
              ),
              Text(
                "User has paused their notifications",
                style: TextStyle(
                  fontSize: 14,
                  fontWeight: FontWeight.w400,
                ),
              ),
            ],
          ),
        );
      },
    )
```
</Accordion>
</Tab>

</Tabs>

<Frame>
  <img src="/images/aa511517-message_composer_header_view-51a25284f115f5033944db611a6ffb5c.png" />
</Frame>


</Accordion>
<Accordion title="Footer Widget">
You can set a custom footer widget to the `CometChatMessageComposer` widget using the `footerView` property:

**Example**

Here is the complete example for reference:

<Tabs>
<Tab title="Dart">
<Accordion title="Show Code Snippet" icon="code">
```dart
CometChatMessageComposer(
  user: user,
  footerView: (context, user, group, id) {
    return Container(
      width: MediaQuery.of(context).size.width/1.08,
      color: Colors.yellow,
      padding: const EdgeInsets.all(8),
      child: const Center(child: Text("Your Footer Widget")),
    );
  },
)
```
</Accordion>
</Tab>

</Tabs>

<Tabs>
<Tab title="Android">
![Image](/images/046c76af-message_composer_footer_view_cometchat_screens-5812a879cc6949aa04be485821255e0a.png)

</Tab>

<Tab title="iOS">
![Image](/images/e57c8a15-message_composer_footer_view_cometchat_screens-49ac543fd44c8879b857da46340db0fe.png)

</Tab>

</Tabs>

</Accordion>
</AccordionGroup>
<Check>
All advanced customization options provide flexibility to create unique, brand-specific conversation interfaces while maintaining functionality.
</Check>
</Accordion>
</AccordionGroup>