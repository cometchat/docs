---
title: "Conversations"
---

## Overview

The `CometChatConversations` is a [Widget](/ui-kit/flutter/components-overview#components), That shows all conversations related to the currently logged-in user,

<Frame>
  <img src="/images/68da96e3-conversations-22a7ffeca154c79c33e12b924a516447.png" />
</Frame>

## Usage

### Integration

As `CometChatConversations` is a widget, it can be initiated either by tapping a button or through the trigger of any event. It offers multiple parameters and methods for tailoring its user interface.

You can launch `CometChatConversations` directly using `Navigator.push`, or you can define it as a widget within the `build` method of your `State` class.

##### 1. Using Navigator to Launch `CometChatConversations`

<Tabs>
<Tab title="Dart">
```dart
Navigator.push(context, MaterialPageRoute(builder: (context) => const CometChatConversations()));
```

</Tab>

</Tabs>

##### 2. Embedding `CometChatConversations` as a Widget in the build Method

<Tabs>
<Tab title="Dart">
```dart
import 'package:cometchat_chat_uikit/cometchat_chat_uikit.dart';
import 'package:flutter/material.dart';

class Conversations extends StatefulWidget {
  const Conversations({super.key});

  @override
  State<Conversations> createState() => _ConversationsState();
}

class _ConversationsState extends State<Conversations> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: SafeArea(
        child: CometChatConversations(),
      ),
    );
  }
}
```

</Tab>

</Tabs>

### Actions

[Actions](/ui-kit/flutter/components-overview#actions) dictate how a widget functions. They are divided into two types: Predefined and User-defined. You can override either type, allowing you to tailor the behavior of the widget to fit your specific needs.

##### onItemTap

`onItemTap` is triggered when you click on a ListItem of the `CometChatConversations` widget. This `onItemTap` method proves beneficial when a user intends to customize the click behavior in CometChatConversations.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    onItemTap: (conversation) => {
        // TODO("Not yet implemented")
    }
),
```

</Tab>

</Tabs>

***

##### onItemLongPress

`onItemLongPress` is triggered when you on long press on a ListItem of the `CometChatConversations` widget. This `onItemLongPress` method proves beneficial when a user intends to customize the long press behavior in CometChatConversations.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    onItemLongPress: (conversation) => {
         // Handle long press on conversation item
    }
),
```

</Tab>

</Tabs>

***

##### onBack

This `onBack` method becomes valuable when a user needs to override the action triggered upon pressing the back button in CometChatConversations.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    onBack: () => {
        // TODO("Not yet implemented")
    },
),
```

</Tab>

</Tabs>

***

##### setOnSelection

The `onSelection` feature enables selection with modes: `SelectionMode.single` and `SelectionMode.multiple`.

The `onSelection` event is triggered upon the completion of a selection in `onSelection`. This returns the selected conversations list when the callback is triggered. It can be executed with any button or action.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    selectionMode: SelectionMode.multiple,
    onSelection: (list) => {
        // TODO("Not yet implemented")
    },
),
```

</Tab>

</Tabs>

***

##### onError

This method proves helpful when a user needs to customize the action taken upon encountering an error in CometChatConversations.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    onError: (e) {
        // TODO("Not yet implemented")
    },
),
```

</Tab>

</Tabs>

***

##### onLoad

Invoked when the list is successfully fetched and loaded, helping track component readiness.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    onLoad: (list) {
        // Handle conversations list load
    },
),
```

</Tab>

</Tabs>

***

##### onEmpty

Called when the list is empty, enabling custom handling such as showing a placeholder message

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    onEmpty: () {
        // Handle empty conversations list
    },
),
```

</Tab>

</Tabs>

***

### Filters

You can set `ConversationsRequestBuilder` in the `CometChatConversations` widget to filter the conversation list. You can modify the builder as per your specific requirements with multiple options available to know more refer to [ConversationsRequestBuilder](/sdk/flutter/retrieve-conversations).

You can set filters using the following parameters.

* Conversation Type: Filters on type of Conversation, User or Groups.
* Limit: Number of conversations fetched in a single request.
* WithTags: Filter on fetching conversations containing tags.
* Tags: Filters on specific Tag.
* UserTags: Filters on specific User Tag.
* GroupTags: Filters on specific Group Tag.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    conversationsRequestBuilder: ConversationsRequestBuilder()
        ..conversationType = "user"
        ..limit = 10
        ..withTags = false,
)
```

</Tab>

</Tabs>

You can set filters using the following parameters:

| Property                     | Description                                          | Code                            |
| :---------------------------- | :---------------------------------------------------- | :------------------------------- |
| **Build**                    | Builds and returns an `ConversationsRequest` object. | `build(): ConversationsRequest` |
| **Conversation Type**        | Type of the conversation.                            | `conversationType: String?`     |
| **Limit**                    | Number of results to limit the query.                | `limit: int?`                   |
| **Tags**                     | Tags for filtering.                                  | `tags: List<String>?`           |
| **With Tags**                | Flag to include tags.                                | `withTags: bool?`               |
| **With User And Group Tags** | Flag to include user and group tags.                 | `withUserAndGroupTags: bool?`   |

***

### Events

[Events](/ui-kit/flutter/components-overview#events) are emitted by a `Widget`. By using event you can extend existing functionality. Being global events, they can be applied in Multiple Locations and are capable of being Added or Removed.

##### 1. Conversation Deleted

This `ccConversationDeleted` will be emitted when the user deletes a conversation

<Tabs>
<Tab title="Dart">
```dart
import 'package:cometchat_chat_uikit/cometchat_chat_uikit.dart';

class _YourScreenState extends State<YourScreen> with CometChatConversationEventListener {

  @override
  void initState() {
    super.initState();
    CometChatConversationEvents.addConversationListListener("listenerId", this); // Add the listener
  }

  @override
  void dispose(){
    super.dispose();
    CometChatConversationEvents.removeConversationListListener("listenerId"); // Remove the listener
  }

  @override
  void ccConversationDeleted(Conversation conversation) {
    // TODO("Not yet implemented")
  }
}
```

</Tab>

</Tabs>

***

## Customization

To align with your app's design specifications, you have the flexibility to customize the appearance of the conversation widget. We offer accessible methods that empower you to tailor the experience and functionality to meet your unique requirements.

### Style

You can set the `CometChatConversationsStyle` to the `CometChatConversations` Widget to customize the styling.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    conversationsStyle: CometChatConversationsStyle(
              avatarStyle: CometChatAvatarStyle(
                borderRadius: BorderRadius.circular(8),
                backgroundColor: Color(0xFFFBAA75),
              ),
              badgeStyle:CometChatBadgeStyle(
                backgroundColor: Color(0xFFF76808)
              )
)
),
```

</Tab>

</Tabs>

<Frame>
  <img src="/images/d0ef0279-conversation_styling-22ac86dbef32a65c2320f06f70301560.png" />
</Frame>

***

### Functionality

These are a set of small functional customizations that allow you to fine-tune the overall experience of the widget. With these, you can change text, set custom icons, and toggle the visibility of UI elements.

<Frame>
  <img src="/images/68da96e3-conversations-22a7ffeca154c79c33e12b924a516447.png" />
</Frame>

<Tabs>
<Tab title="Dart">
```dart
 CometChatConversations(
    showBackButton: false,
    title: "Your Title",
)
```

</Tab>

</Tabs>

List of Poperties exposed by `CometChatConversations`

| Property                                          | Description                                                                                                                                                                     | Code                                                       |
| :------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------- |
| **Activate Selection**                            | Used to specify if the listed conversations can be selected, selection can be activated on tap or on long press                                                                 | `activateSelection: ActivateSelection`                     |
| **AppBar Options**                                | Used to set the options available in the app bar                                                                                                                                | `appBarOptions: List<Widget>`                              |
| **Back Button**                                   | Used to set back button located in the app bar                                                                                                                                  | `backButton: Widget`                                       |
| **Scroll Controller**                             | Used to programmatically update the scroll physics of list containing the conversations                                                                                         | `scrollController: ScrollController`                       |
| **Date Pattern**                                  | Used to display a custom string instead of the timestamp show at the tail of the conversation item                                                                              | `datePattern: String Function(Conversation conversation)`  |
| **Empty State View**                              | Used to set a custom widget response when fetching the conversations has returned an empty list                                                                                 | `emptyStateView: WidgetBuilder`                            |
| **Error State View**                              | Used to set a custom widget response when some error occurs on fetching the list of conversations                                                                               | `errorStateView: WidgetBuilder`                            |
| **Loading State View**                            | Used to set a custom widget response when conversations are loading                                                                                                             | `loadingStateView: WidgetBuilder`                          |
| **Hide Appbar**                                   | Toggle visibility for app bar                                                                                                                                                   | `hideAppbar: bool`                                         |
| **Hide Error**                                    | Used to hide error on fetching conversations                                                                                                                                    | `hideError: bool`                                          |
| **Hide Receipt**                                  | Used to toggle visibility of message receipts shown in the subtitle of the conversation                                                                                         | `receiptsVisibility: bool`                                 |
| **Protected Group Icon**                          | Used to set icon shown in place of status indicator if the conversation is taking place in a password-protected group                                                           | `protectedGroupIcon: Widget`                               |
| **Private Group Icon**                            | Used to set icon shown in place of status indicator if the conversation is taking place in a private group                                                                      | `privateGroupIcon: Widget`                                 |
| **Selection Icon**                                | Change selection icon                                                                                                                                                           | `selectionIcon: Widget`                                    |
| **Sent Icon**                                     | Used to customize the receipt icon shown in the subtitle of the conversation item if receiptsVisibility is false and the status of the last message in the conversation is sent | `sentIcon: Widget`                                         |
| **Delivered Icon**                                | Used to customize the receipt icon if the message was delivered                                                                                                                 | `deliveredIcon: Widget`                                    |
| **Read Icon**                                     | Used to customize the receipt icon if the message was read                                                                                                                      | `readIcon: Widget`                                         |
| **Show Back Button**                              | Used to toggle visibility for back button                                                                                                                                       | `showBackButton: bool`                                     |
| **Theme**                                         | Used to set a custom theme                                                                                                                                                      | `conversationsStyle: CometChatConversationsStyle`          |
| **Title**                                         | Used to set the title in the app bar                                                                                                                                            | `title: String`                                            |
| **Typing Indicator Text**                         | Used to customize the text response shown in the subtitle of the conversation item if a participant of a conversation is typing                                                 | `typingIndicatorText: String`                              |
| **Disable Conversation Delete Option Visibility** | Used to toggle visibility for delete option                                                                                                                                     | `deleteConversationOptionVisibility: bool`                 |
| **User Status Visibility**                        | Used to control visibility of status indicator shown if a user is online                                                                                                        | `usersStatusVisibility: bool`                              |
| **Group Type Visibility**                         | Used to control visibility of the status indicator shown for the group type                                                                                                     | `groupTypeVisibility: bool`                                |
| **On Back**                                       | Callback triggered when closing the screen                                                                                                                                      | `onBack: VoidCallback`                                     |
| **On Item Tap**                                   | Callback triggered when tapping a conversation item                                                                                                                             | `onItemTap: Function(Conversation conversation)`           |
| **On Item Long Press**                            | Callback triggered when long pressing a conversation item                                                                                                                       | `onItemLongPress: Function(Conversation conversation)`     |
| **Text Formatters**                               | List of text formatters for message bubbles with text type                                                                                                                      | `textFormatters: List<CometChatTextFormatter>`             |
| **Date Padding**                                  | Provides padding for the conversation date                                                                                                                                      | `datePadding: EdgeInsets`                                  |
| **Date Height**                                   | Provides height for the conversation date                                                                                                                                       | `dateHeight: double`                                       |
| **Date Background Transparency**                  | Controls the background transparency of the conversation date                                                                                                                   | `dateBackgroundIsTransparent: bool`                        |
| **Date Width**                                    | Provides width for the conversation date                                                                                                                                        | `dateWidth: double`                                        |
| **Badge Width**                                   | Provides width for conversation badges                                                                                                                                          | `badgeWidth: double`                                       |
| **Badge Height**                                  | Provides height for conversation badges                                                                                                                                         | `badgeHeight: double`                                      |
| **Badge Padding**                                 | Provides padding for conversation badges                                                                                                                                        | `badgePadding: EdgeInsetsGeometry`                         |
| **Avatar Width**                                  | Provides width for user/group avatars                                                                                                                                           | `avatarWidth: double`                                      |
| **Avatar Height**                                 | Provides height for user/group avatars                                                                                                                                          | `avatarHeight: double`                                     |
| **Avatar Padding**                                | Provides padding for user/group avatars                                                                                                                                         | `avatarPadding: EdgeInsetsGeometry`                        |
| **Avatar Margin**                                 | Provides margin for user/group avatars                                                                                                                                          | `avatarMargin: EdgeInsetsGeometry`                         |
| **Status Indicator Width**                        | Provides width for the user/group status indicator                                                                                                                              | `statusIndicatorWidth: double`                             |
| **Status Indicator Height**                       | Provides height for the user/group status indicator                                                                                                                             | `statusIndicatorHeight: double`                            |
| **Status Indicator Border Radius**                | Provides border radius for the user/group status indicator                                                                                                                      | `statusIndicatorBorderRadius: BorderRadiusGeometry`        |
| **Controller Tag**                                | Tag for controller, used when parent needs to control the widget                                                                                                                | `controllerTag: String`                                    |
| **Submit Icon**                                   | Used to override the default submit icon                                                                                                                                        | `submitIcon: Widget`                                       |
| **Set Options**                                   | Sets the list of actions available on long press of a list item                                                                                                                 | `setOptions: Function(Conversation, Controller, Context)`  |
| **Add Options**                                   | Adds into the current list of actions available on long press of a list item                                                                                                    | `addOptions: Function(Conversation, Controller, Context)`  |
| **Leading View**                                  | Custom widget for the leading section of each conversation                                                                                                                      | `leadingView: Widget Function(BuildContext, Conversation)` |
| **Title View**                                    | Custom widget for the title section of each conversation                                                                                                                        | `titleView: Widget Function(BuildContext, Conversation)`   |
| **On Load**                                       | Callback when conversation list is loading                                                                                                                                      | `onLoad: OnLoad<Conversation>`                             |
| **On Empty**                                      | Callback when conversation list is empty                                                                                                                                        | `onEmpty: OnEmpty`                                         |
| **On Error**                                      | Callback when an error occurs                                                                                                                                                   | `onError: OnError`                                         |
| **Custom Sound For Messages**                     | Set a custom notification sound for messages                                                                                                                                    | `customSoundForMessages: String`                           |
| **Disable Sound For Messages**                    | Disable sound for messages                                                                                                                                                      | `disableSoundForMessages: bool`                            |

### Advanced

For advanced-level customization, you can set custom views to the widget. This lets you tailor each aspect of the widget to fit your exact needs and application aesthetics. You can create and define your own widget and then incorporate those into the widget.

#### setOptions

This method sets a predefined list of actions that users can perform when they long press a conversation in the list. These options typically include:

* Deleting a conversation
* Marking a conversation as read or unread
* Pinning or unpinning a conversation
* Muting notifications for a specific conversation

By customizing these options, developers can provide a streamlined and contextually relevant user experience.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    setOptions: (conversation, controller, context) { return [];},
)
```

</Tab>

</Tabs>

Demonstration

<Frame>
  <img src="/images/9415d47d-conversation_set_option-42a75eb50360de67a9bfab69beefbda3.png" />
</Frame>

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    setOptions: (conversation, controller, context) {
          return [
            CometChatOption(
              id: "Delete Conversation",
              icon: AssetConstants.delete,
              title: "Delete",
              onClick: () {
                // Delete Conversation
              },
            ),
          ];
        },
),
```

</Tab>

</Tabs>

***

#### addOptions

This method extends the existing set of actions available when users long press a conversation item. Unlike setOptionsDefines, which replaces the default options, addOptionsAdds allows developers to append additional actions without removing the default ones. Example use cases include:

* Adding a "Report Spam" action
* Introducing a "Save to Notes" option
* Integrating third-party actions such as "Share to Cloud Storage"

This method provides flexibility in modifying user interaction capabilities.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    addOptions: (conversation, controller, context) { return [];},
),
```

</Tab>

</Tabs>

Demonstration

<Frame>
  <img src="/images/88283fe5-conversation_add_options-c0f407ccc43b5f040d9ab9147e17def0.png" />
</Frame>

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
addOptions: (conversation, controller, context) {
                return [
                  CometChatOption(
                    id: "Archive",
                    iconWidget: Icon(
                      Icons.archive_outlined,
                      color: colorPalette.error,
                    ),
                    title: "Archive",
                    onClick: () {
                      // Archive Conversation
                    },
                  ),
                  CometChatOption(
                    id: "Pin",
                    iconWidget: Icon(
                      Icons.push_pin_outlined,
                      color: colorPalette.error,
                    ),
                    title: "Pin",
                    onClick: () {
                      // Pin Conversation
                    },
                  ),
                  CometChatOption(
                    id: "Mark As Read",
                    iconWidget: Icon(
                      Icons.mark_chat_unread_outlined,
                      color: colorPalette.error,
                    ),
                    title: "Mark as unread",
                    onClick: () {
                      // Mark as unread
                    },
                  ),
                ];
              },
),
```

</Tab>

</Tabs>

***

#### disableSoundForMessages

This disables sound notifications for incoming messages. When activated, the application will not play an audio alert when new messages arrive. This feature is beneficial in scenarios where:

* Users prefer a silent messaging experience
* The app is being used in a professional or quiet environment
* Background processes need to minimize distractions

By providing this option, the app allows users to tailor their notification preferences

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    disableSoundForMessages: true,
)
```

</Tab>

</Tabs>

***

#### setCustomSoundForMessages

This method enables users to personalize their chat experience by setting a custom sound file for incoming message notifications. Users can choose from:

* Default system sounds
* Custom sound files uploaded by the user
* Theme-based or brand-specific notification sounds

By allowing sound customization, this feature enhances personalization and improves user engagement.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    customSoundForMessages: "message.mp3",
),
```

</Tab>

</Tabs>

***

#### loadingStateView

This method allows developers to set a custom loading view that is displayed when data is being fetched or loaded within the component. Instead of using a default loading spinner, a custom animation, progress bar, or branded loading screen can be displayed.

Use cases :

* Showing a skeleton loader for conversations while data loads
* Displaying a custom progress indicator with branding
* Providing an animated loading experience for a more engaging UI

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    loadingStateView: (context) {
        // return Loading state Widget
    },
),
```

</Tab>

</Tabs>

***

#### emptyStateView

Configures a custom view to be displayed when there are no conversations or messages in the list. This improves the user experience by providing meaningful content instead of an empty screen.

Use cases :

* Displaying a message like "No conversations yet. Start a new chat!"
* Showing an illustration or animation to make the UI visually appealing
* Providing a button to start a new conversation

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
     emptyStateView: (context) {
          // return Empty state Widget
     },
),
```

</Tab>

</Tabs>

***

#### errorStateView

Defines a custom error state view that appears when an issue occurs while loading conversations or messages. This enhances the user experience by displaying friendly error messages instead of generic system errors.

Use cases :

* Showing "Something went wrong. Please try again." with a retry button
* Displaying a connection issue message if the user is offline
* Providing troubleshooting steps for the error

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
     errorStateView: (context) {
          // return Error state Widget
    },
),
```

</Tab>

</Tabs>

***

#### leadingView

Allows setting a custom leading view element that appears at the beginning of each conversation item. This is typically used to modify profile pictures, avatars, or icons in the conversation list.

Use cases :

* Displaying user avatars with online/offline status indicators
* Using initials or custom graphics instead of images

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    leadingView: (context, conversation) {
       // return leading view
    },
),
```

</Tab>

</Tabs>

Demonstration

<Frame>
  <img src="/images/50dd219e-conversation_leading_view-65768f699fe3f064c14b0491f7ce0f91.png" />
</Frame>

<Tabs>
<Tab title="Dart">
```dart


  Map<String, TypingIndicator> typingMap = {};

  @override
  void onTypingStarted(TypingIndicator typingIndicator) {
    if (userIsNotBlocked(typingIndicator.sender)) {
      setTypingIndicator(typingIndicator, true);
    }
  }


  @override
  void onTypingEnded(TypingIndicator typingIndicator) {
    if (userIsNotBlocked(typingIndicator.sender)) {
      setTypingIndicator(typingIndicator, false);
    }
  }

  bool userIsNotBlocked(User user) {
    return user.blockedByMe != true && user.hasBlockedMe != true;
  }

  void setTypingIndicator(
      TypingIndicator typingIndicator, bool isTypingStarted) {
    if (typingIndicator.receiverType == ReceiverTypeConstants.user) {
      if (isTypingStarted) {
        typingMap[typingIndicator.sender.uid] = typingIndicator;
      } else {
        typingMap.remove(typingIndicator.sender.uid);
      }
    } else {
      if (isTypingStarted) {
        typingMap[typingIndicator.receiverId] = typingIndicator;
      } else {
        typingMap.remove(typingIndicator.receiverId);
      }
    }
    setState(() {});
  }

CometChatConversations(
leadingView: (context, conversation) {
                if (typingMap.containsKey(
                    (conversation.conversationType == "user"
                        ? (conversation.conversationWith as User).uid
                        : (conversation.conversationWith as Group).guid))) {
                  return Container(
                    decoration: BoxDecoration(
                      border: Border.all(color: Color(0xFFF76808), width: 2),
                      borderRadius: BorderRadius.circular(8),
                    ),
                    child: Image.asset(
                      "assets/leading_typing_icon.png",
                      height: 40,
                      width: 40,
                    ),
                  );
                }
                return null;
              },
)
```

</Tab>

</Tabs>

***

#### titleView

Overrides the default title view in the conversation list with a custom layout. This is useful for branding or modifying how conversation names and details are displayed.

Use cases :

* Displaying conversation titles with additional metadata (e.g., last seen time)
* Custom fonts or text styles for conversation names
* Adding icons or indicators next to titles

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    titleView: (context, conversation) {
       // return title view
    },
)
```

</Tab>

</Tabs>

Demonstration

<Frame>
  <img src="/images/ca63e2f2-conversation_title_view-41ee32465c311e39b37abddf95bbf190.png" />
</Frame>

<Tabs>
<Tab title="Dart">
```dart

CometChatConversations(
 titleView: (context, conversation) {
                return Row(
                  children: [
                    Text(
                      conversation.conversationWith is User
                          ? (conversation.conversationWith as User).name ?? ""
                          : (conversation.conversationWith as Group).name ?? "",
                      style: TextStyle(
                        color: colorPalette.textPrimary,
                        fontSize: typography.body?.medium?.fontSize,
                        fontFamily: typography.body?.medium?.fontFamily,
                        fontWeight: typography.body?.medium?.fontWeight,
                      ),
                    ),
                    Text(
                      (conversation.conversationWith is User &&
                              (conversation.conversationWith as User)
                                      .statusMessage !=
                                  null)
                          ? ". ${(conversation.conversationWith as User).statusMessage}"
                          : "",
                      style: TextStyle(
                        color: colorPalette.textPrimary,
                        fontSize: typography.body?.medium?.fontSize,
                        fontFamily: typography.body?.medium?.fontFamily,
                        fontWeight: typography.body?.medium?.fontWeight,
                      ),
                    ),
                  ],
                );
              },
)
```

</Tab>

</Tabs>

***

#### trailingView

Customizes the trailing (end) view of a conversation item, which is typically used for action buttons or additional information.

Use cases :

* Adding a mute/unmute button for each conversation
* Displaying the last message time in a custom format
* Showing unread message counts or notification badges

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    trailingView: (context, conversation) {
       // return tailing view
    },
)
```

</Tab>

</Tabs>

Demonstration

<Frame>
  <img src="/images/9c92115a-conversation_trailing_view-15ca261b8d20291c19b48c7f7af81976.png" />
</Frame>

<Tabs>
<Tab title="Dart">
```dart

CometChatConversations(
trailingView: (conversation) {
                int timestamp =
                    conversation.updatedAt?.millisecondsSinceEpoch ?? 0;
                if (timestamp.toString().length == 10) {
                  timestamp *=
                      1000; // Convert seconds to milliseconds if needed
                }

                DateTime now = DateTime.now();
                DateTime lastSeen =
                    DateTime.fromMillisecondsSinceEpoch(timestamp);

                Duration diff = now.difference(lastSeen);
                int diffInMinutes = diff.inMinutes;
                int diffInHours = diff.inHours;

                String timeText;
                String minText;
                Color textColor;
                Color cardColor;

                if (diffInMinutes == 0) {
                  timeText = "1";
                  minText = "Min ago";
                  textColor = Color(0xFF6852D6);
                  cardColor = Color(0x666852D6); // 40% alpha
                } else if (diffInMinutes < 60) {
                  timeText = "$diffInMinutes";
                  minText = "Min ago";
                  textColor = Color(0xFF6852D6);
                  cardColor = Color(0x666852D6);
                } else if (diffInHours < 10) {
                  timeText = "$diffInHours";
                  minText = "Hr ago";
                  textColor = Color(0xFFFFAB00);
                  cardColor = Color(0x66FFAB00);
                } else {
                  timeText = "$diffInHours";
                  minText = "Hr ago";
                  textColor = Color(0xFFF44649);
                  cardColor = Color(0x66F44649);
                }
                return Card(
                  color: cardColor,
                  child: Padding(
                    padding: EdgeInsets.symmetric(
                      vertical: spacing.padding1 ?? 0,
                      horizontal: spacing.padding1 ?? 0,
                    ),
                    child: Column(
                      crossAxisAlignment: CrossAxisAlignment.center,
                      children: [
                        Text(
                          timeText,
                          style: TextStyle(
                              color: textColor,
                              fontSize: 16,
                              fontWeight: FontWeight.bold),
                        ),
                        Text(
                          minText,
                          style: TextStyle(
                              color: textColor,
                              fontSize: 16,
                              fontWeight: FontWeight.bold),
                        ),
                      ],
                    ),
                  ),
                );
              },
)
```

</Tab>

</Tabs>

***

#### ListItemView

With this function, you can assign a custom ListItem view to the `CometChatConversations` Widget.

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
    listItemView: (conversation) {
      return Placeholder();
    },
)
```

</Tab>

</Tabs>

<Frame>
  <img src="/images/46c507bf-conversation_listitem_view-ca293b2d4eacf61572e21f6fd399ff30.png" />
</Frame>

**Example**

Here is the complete example for reference:

<Tabs>
<Tab title="Dart">
```dart custom_list_item.dart
Widget getCustomListItem(
    Conversation conversation,
    BuildContext context
    ) {
  Widget? tail;
  Color? statusBackgroundColor;
  Widget? icon;
  final lastMessageTime = conversation.lastMessage?.sentAt ?? DateTime.now();
  tail = Padding(
      padding: EdgeInsets.only(
        left: 8,
      ),
      child: CometChatDate(
        date: lastMessageTime,
        padding:const EdgeInsets.all(0),
        style: CometChatDateStyle(
          backgroundColor: Colors.transparent,
          textStyle: TextStyle(
            color: Color(0xFF727272),
            fontSize: 12,
            fontWeight: FontWeight.w400,
          ),
          border:
          Border.all(
            width: 0,
            color: Colors.transparent,
          ),
        ),
        pattern: DateTimePattern.dayDateTimeFormat,
      )
  );


  User? conversationWithUser;
  Group? conversationWithGroup;
  if (conversation.conversationWith is User) {
    conversationWithUser = conversation.conversationWith as User;
  } else {
    conversationWithGroup = conversation.conversationWith as Group;
  }

  final statusStyle =
  CometChatThemeHelper.getTheme<CometChatStatusIndicatorStyle>(
      context: context,
      defaultTheme: CometChatStatusIndicatorStyle.of);

  StatusIndicatorUtils statusIndicatorUtils =
  StatusIndicatorUtils.getStatusIndicatorFromParams(
      context: context,
      user: conversationWithUser,
      group: conversationWithGroup,
      onlineStatusIndicatorColor: Color(0xFF09C26F)
  );

  statusBackgroundColor = statusIndicatorUtils.statusIndicatorColor;
  icon = statusIndicatorUtils.icon;
  return GestureDetector(
    key: UniqueKey(),
    child: CometChatListItem(
      avatarHeight:48,
      avatarWidth:48,
      id: conversation.conversationId,
      avatarName: conversationWithUser?.name ?? conversationWithGroup?.name,
      avatarURL: conversationWithUser?.avatar ?? conversationWithGroup?.icon,
      avatarStyle: CometChatAvatarStyle(
        borderRadius: BorderRadius.circular(8),
        backgroundColor: Color(0xFFAA9EE8),
      ),
      title: conversationWithUser?.name ?? conversationWithGroup?.name,
      key: UniqueKey(),
      tailView: tail,
      statusIndicatorColor: statusBackgroundColor,
      statusIndicatorIcon: icon,
      statusIndicatorStyle: CometChatStatusIndicatorStyle(
        border: statusStyle.border ??
            Border.all(
              width: 2,
              color: Color(0xFFFFFFFF),
            ),
        backgroundColor: statusStyle.backgroundColor,
      ),
      hideSeparator: true,
      style: ListItemStyle(
        background: Colors.transparent,
        titleStyle: TextStyle(
          overflow: TextOverflow.ellipsis,
          fontSize: 16,
          fontWeight: FontWeight.w500,
          color: Color(0xFF141414),
        ),
        padding: EdgeInsets.symmetric(
          horizontal: 16,
          vertical: 12,
        ),
      ),
    ),
  );
}
```

</Tab>

</Tabs>

<Tabs>
<Tab title="Dart">
```dart main.dart
CometChatConversations(
  listItemView: (conversation) {
              return getCustomListItem(
                conversation,
                context
              );
    },
)
```

</Tab>

</Tabs>

***

#### TextFormatters

Assigns the list of text formatters. If the provided list is not null, it sets the list. Otherwise, it assigns the default text formatters retrieved from the data source. To configure the existing Mentions look and feel check out [CometChatMentionsFormatter](/ui-kit/flutter/mentions-formatter-guide)

**Example**

Here is the complete example for reference:

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
  textFormatters: [
       CometChatMentionsFormatter(
              style: CometChatMentionsStyle(
                     mentionSelfTextBackgroundColor: Color(0xFFF76808),
                     mentionTextBackgroundColor: Colors.white,
                     mentionTextColor: Colors.black,
                     mentionSelfTextColor: Colors.white,
                    )
          )
    ],
)
```

</Tab>

</Tabs>

<Frame>
  <img src="/images/74b20b0e-mentions_styling-8e36e26282f4facd7920dc23ca98b832.png" />
</Frame>

***

#### AppBarOptions

You can set the Custom AppBarOptions to the `CometChatConversations` widget.

<Frame>
  <img src="/images/835761c9-conversation_menu-e4a2a88888d75b51127bf7d5b7644332.png" />
</Frame>

<Tabs>
<Tab title="Dart">
```dart
 CometChatConversations(
      showBackButton: false,
      appBarOptions: [
        PopupMenuButton(
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(8),
            side: BorderSide(
              color: Color(0xFFF5F5F5),
              width: 1,
            ),
          ),
          color: Color(0xFFFFFFFF),
          elevation: 4,
          menuPadding : EdgeInsets.zero,
          padding: EdgeInsets.zero,
          icon: Padding(
            padding: EdgeInsets.only(
              left: 12,
              right: 16,
            ),
            child: CometChatAvatar(
              width: 40,
              height: 40,
              image: CometChatUIKit.loggedInUser?.avatar,
              name: CometChatUIKit.loggedInUser?.name,
            ),
          ),
          onSelected: (value) {
            switch (value) {
              case '/Create':
                setState(() {
                  _selectedIndex = 2;
                });
                break;
              case '/logout':
                logout();
                break;
              case '/name':
                break;
              case '/version':
                break;
            }
          },
          position: PopupMenuPosition.under,
          enableFeedback: false,
          itemBuilder: (BuildContext context) {
            return [
              PopupMenuItem(
                height: 44,
                padding: EdgeInsets.all(16),
                value: '/Create',
                child: Row(
                  crossAxisAlignment: CrossAxisAlignment.center,
                  children: [
                    Padding(
                      padding:
                      EdgeInsets.only(right: 8),
                      child: Icon(
                        Icons.add_comment_outlined,
                        color: Color(0xFFA1A1A1),
                        size: 24,
                      ),
                    ),
                    Text(
                      "Create Conversation",
                      style: TextStyle(
                        fontSize: 14,
                        fontWeight:FontWeight.w400,
                        color: Color(0xFF141414),
                      ),
                    ),
                  ],
                ),
              ),
              PopupMenuItem(
                height: 44,
                padding: EdgeInsets.all(16),
                value: '/name',
                child: Row(
                  crossAxisAlignment: CrossAxisAlignment.center,
                  children: [
                    Padding(
                      padding:
                      EdgeInsets.only(right: 8),
                      child: Icon(
                        Icons.account_circle_outlined,
                        color: Color(0xFFA1A1A1),
                        size: 24,
                      ),
                    ),
                    Text(
                      CometChatUIKit.loggedInUser?.name ?? "",
                      style: TextStyle(
                        fontSize: 14,
                        fontWeight:FontWeight.w400,
                        color: Color(0xFF141414),
                      ),
                    ),
                  ],
                ),
              ),
              PopupMenuItem(
                height: 44,
                padding: EdgeInsets.all(16),
                value: '/logout',
                child: Row(
                  crossAxisAlignment: CrossAxisAlignment.center,
                  children: [
                    Padding(
                      padding:
                      EdgeInsets.only(right: 8),
                      child: Icon(
                        Icons.logout,
                        color: Colors.red,
                        size: 24,
                      ),
                    ),
                    Text(
                      "Logout",
                      style: TextStyle(
                        fontSize: 14,
                        fontWeight:FontWeight.w400,
                        color: Colors.red,
                      ),
                    ),
                  ],
                ),
              ),
              PopupMenuItem(
                enabled: false,
                height: 44,
                padding: EdgeInsets.zero,
                value: '/version',
                child: Container(
                  width: double.infinity,
                  decoration: BoxDecoration(
                    border: Border(
                      top: BorderSide(
                        color: Color(0xFFF5F5F5),
                        width: 1,
                      ),
                    ),
                  ),
                  child: Padding(
                    padding: EdgeInsets.all(16),
                    child: Text(
                      "V5.0.0_alpha1",
                      style: TextStyle(
                        fontSize: 14,
                        fontWeight:FontWeight.w400,
                        color: Color(0xFF727272),
                      ),
                    ),
                  ),
                ),
              ),
            ];
          },
        ),
      ],
      onItemTap: (conversation) {
        User? user;
        Group? group;
        if (conversation.conversationWith is User) {
          user = conversation.conversationWith as User;
        } else {
          group = conversation.conversationWith as Group;
        }
        navigateToMessages(user: user, group: group);
      },
    )
```

</Tab>

</Tabs>

***

#### DatePattern

You can modify the date pattern to your requirement using `datePattern`. This method accepts a function with a return type String. Inside the function, you can create your own pattern and return it as a String.

<Frame>
  <img src="/images/2edb1799-conversation_date_pattern-3ed51f58de4a22b26c555c101b3c7f50.png" />
</Frame>

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
  datePattern: (conversation) => DateFormat('d MMM, hh:mm a').format(conversation.lastMessage?.sentAt ?? DateTime.now()),
)
```

</Tab>

</Tabs>

***

#### SubtitleView

You can customize the subtitle view for each conversation item to meet your requirements

<Frame>
  <img src="/images/00017e69-conversation_subtitleview-da365aba84e7c1ecec9234912eb1a7db.png" />
</Frame>

<Tabs>
<Tab title="Dart">
```dart
CometChatConversations(
  subtitleView: (context, conversation) {
              String subtitle = "";

              if (conversation.conversationWith is User) {
                User user = conversation.conversationWith as User;
                final dateTime = user.lastActiveAt ?? DateTime.now();
                subtitle = "Last Active at " + DateFormat('dd/MM/yyyy, HH:mm:ss').format(dateTime);
              } else {
                Group group = conversation.conversationWith as Group;
                final dateTime = group.createdAt ?? DateTime.now();
                subtitle = "Created at " + DateFormat('dd/MM/yyyy, HH:mm:ss').format(dateTime);
              }
              return Text(subtitle,
                        style: TextStyle(
                          color: Color(0xFF727272),
                          fontSize: 14,
                          fontWeight: FontWeight.w400,
                        ),
              );
    }
)
```

</Tab>

</Tabs>

***
