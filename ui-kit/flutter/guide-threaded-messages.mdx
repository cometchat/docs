---
title: "CometChat Flutter UI Kit — Threaded Messages"
sidebarTitle: "Threaded Messages"
---

## Table of Contents

1. [Overview](#overview)
2. [What Are Threaded Messages?](#what-are-threaded-messages)
3. [Components Used](#components-used)
4. [Integration Steps](#integration-steps)
   1. [Show the “Reply in Thread” Option](#show-the-reply-in-thread-option)
   2. [Navigate to the Thread Screen](#navigate-to-the-thread-screen)
   3. [Sending a Threaded Message](#sending-a-threaded-message)
   4. [Fetching & Displaying Thread Replies](#fetching--displaying-thread-replies)
5. [Example User Flow](#example-user-flow)
6. [Summary](#summary)

## Overview

The sample app demonstrates how to use `CometChatMessageList` and `CometChatThreadedMessageList` to enable:
- Replying to messages in a thread
- Viewing all replies under a parent message
- Switching back to the main conversation

## What Are Threaded Messages?

Threaded messages let users reply to a specific message, creating a sub-conversation (thread) beneath the original. This keeps group chats organized when multiple topics arise simultaneously.

## Components Used

| Component                     | Role                                                                 |
|-------------------------------|----------------------------------------------------------------------|
| `CometChatMessageList`        | Displays the main chat list; provides `onThreadRepliesClick` callback. |
| `CometChatThreadedMessageList`| Fetches and displays replies for a parent message.                    |
| `CometChatMessageComposer`    | Input field that sends replies with `parentMessageId`.                |
| `CometChatThreadedHeader`     | Shows the parent message and thread info at the top.                 |

## Integration Steps

### Show the “Reply in Thread” Option

In your `messages.dart` (under `lib/messages/`), hook into the `onThreadRepliesClick` callback:

```dart
CometChatMessageList(
  onThreadRepliesClick: (BaseMessage message) {
    Navigator.push(
      context,
      MaterialPageRoute(
        builder: (_) => CometChatThread(
          parentMessage: message,
        ),
      ),
    );
  },
  // … other props
);
```

<small>File reference: `sample_app/lib/messages/messages.dart`</small>

### Navigate to the Thread Screen

Create a `CometChatThread` widget (e.g. in `lib/thread_screen/cometchat_thread.dart`) that:

- Receives `parentMessage` via constructor.
- Displays the parent at top with `CometChatThreadedHeader`.
- Renders replies with `CometChatThreadedMessageList`.
- Includes a `CometChatMessageComposer` configured for threads.

```dart
class CometChatThread extends StatelessWidget {
  final BaseMessage parentMessage;

  CometChatThread({required this.parentMessage});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text("Thread")),
      body: Column(
        children: [
          CometChatThreadedHeader(message: parentMessage),
          Expanded(
            child: CometChatThreadedMessageList(
              parentMessageId: parentMessage.id,
            ),
          ),
          CometChatMessageComposer(
            parentMessageId: parentMessage.id,
          ),
        ],
      ),
    );
  }
}
```

<small>File reference: `sample_app/lib/thread_screen/cometchat_thread.dart`</small>

### Sending a Threaded Message

The composer automatically sends with a thread context when you pass `parentMessageId`:

```dart
CometChatMessageComposer(
  parentMessageId: parentMessage.id,
  // …other props
);
```

### Fetching & Displaying Thread Replies

Internally, `CometChatThreadedMessageList` uses:

```dart
MessagesRequest request = MessagesRequestBuilder()
  .setParentMessageId(parentMessageId)
  .build();

request.fetchPrevious().then((replies) {
  // Display these in the list
});
```

## Example User Flow

1. Tap the thread icon on a message in the main chat.
2. Navigate to the `CometChatThread` screen.
3. View the parent message at top and its replies below.
4. Compose and send a reply via the threaded composer.
5. All participants see and can join the thread.

## Summary

| Feature                    | Implementation Component                                      |
|----------------------------|---------------------------------------------------------------|
| Show thread option         | `CometChatMessageList.onThreadRepliesClick`                   |
| Navigate to thread screen  | Push `CometChatThread(parentMessage)`                         |
| Display thread messages    | `CometChatThreadedMessageList(parentMessageId)`               |
| Send threaded reply        | `CometChatMessageComposer(parentMessageId)`                   |
