---
title: "Implementing Block/Unblock User in Flutter with CometChat UIKit"
sidebarTitle: "Block/Unblock User"
---

## 1. Title & TL;DR

- **Title:** Implementing Block/Unblock User in Flutter with CometChat UIKit  
- **TL;DR:** Enable users to block and unblock other users in your Flutter chat app by integrating CometChat’s `blockUsers` and `unblockUsers` methods with a simple UI.

## 2. Table of Contents

1. [Overview](#3-overview)  
2. [Prerequisites](#4-prerequisites)  
3. [Components](#5-components)  
4. [Integration Steps](#6-integration-steps)  
   4.1 [Navigate to User Info Screen](#61-navigate-to-user-info-screen)  
   4.2 [Add “Block User” Button](#62-add-block-user-button)  
   4.3 [Add “Unblock User” Button](#63-add-unblock-user-button)  
5. [Customization Options](#7-customization-options)  
6. [Filtering / Edge Cases](#8-filtering--edge-cases)  
7. [Error Handling & Blocked-User Handling](#9-error-handling--blocked-user-handling)  
8. [(Optional) Context-Specific Notes](#10-optional-context-specific-notes)  
9. [Summary / Feature Matrix](#11-summary--feature-matrix)  
10. [Next Steps & Further Reading](#12-next-steps--further-reading)  

## 3. Overview

- **What:** The Block User feature lets one user prevent another user from sending messages or interacting with them.  
- **Why:** Essential for user privacy, spam control, and moderation in public or group chats.  
- **Result:** A UI where users tap “Block” or “Unblock,” and the CometChat SDK enforces the block state.

## 4. Prerequisites

- Flutter project with **CometChat UIKit Flutter v5** installed  
- Valid CometChat **appID**, **region**, and **authKey** initialized  
- Navigation set up between your chat list (`lib/messages.dart`) and user-info screen  

## 5. Components

| Component                              | Role                                                      |
|----------------------------------------|-----------------------------------------------------------|
| `CometChatUserInfo`                    | Displays user profile with block/unblock controls         |
| `CometChatUIKit.blockUsers([...])`     | SDK method to block specified user(s)                     |
| `CometChatUIKit.unblockUsers([...])`   | SDK method to unblock specified user(s)                   |
| `ElevatedButton`                       | Flutter widget for block/unblock actions                  |

## 6. Integration Steps

### 6.1 Navigate to User Info Screen

**Goal:** Open the user-info screen when tapping the info icon in chat.  
```dart
IconButton(
  icon: Icon(Icons.info_outline),
  onPressed: () {
    Navigator.push(
      context,
      MaterialPageRoute(
        builder: (_) => CometChatUserInfo(user: tappedUser),
      ),
    );
  },
);
```
<small>File reference: `lib/messages.dart`</small>  
**Why:** Allows the user to view profile details and access block/unblock controls.

### 6.2 Add “Block User” Button

**Goal:** Let users block another user via the SDK.  
```dart
ElevatedButton(
  onPressed: () async {
    try {
      await CometChatUIKit.blockUsers([user.uid]);
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text('\${user.name} has been blocked')),
      );
    } catch (e) {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text('Error blocking user: \$e')),
      );
    }
  },
  child: Text('Block User'),
);
```
<small>File reference: `lib/user_info/cometchat_user_info.dart`</small>  
**Why:** Calls `blockUsers`, then provides user feedback.

### 6.3 Add “Unblock User” Button

**Goal:** Allow users to undo the block.  
```dart
ElevatedButton(
  onPressed: () async {
    try {
      await CometChatUIKit.unblockUsers([user.uid]);
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text('\${user.name} has been unblocked')),
      );
    } catch (e) {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text('Error unblocking user: \$e')),
      );
    }
  },
  child: Text('Unblock User'),
);
```
<small>File reference: `lib/user_info/cometchat_user_info.dart`</small>  
**Why:** Calls `unblockUsers`, then provides user feedback.

## 7. Customization Options

- **Button Styling:** Use `ElevatedButton.styleFrom(...)` to customize colors, padding, and shape.  
- **Conditional Rendering:** Display “Block” or “Unblock” based on `user.blockedByMe` state.  
- **Modal Confirmation:** Wrap actions in `showDialog` for “Are you sure?” prompts.  

## 8. Filtering / Edge Cases

- **Self-Block Prevention:** Disable the button if `user.uid == loggedInUser.uid`.  
- **Offline Users:** Optionally disable or queue actions when network is unavailable.  

## 9. Error Handling & Blocked-User Handling

- **SnackBars:** Show success or error messages via `ScaffoldMessenger`.  
- **Retry Logic:** Offer a “Retry” action in the SnackBar on failure.  
- **UI State:** Disable the button while the SDK call is in progress to prevent duplicates.  

## 10. (Optional) Context-Specific Notes

**Group vs. User Blocking:**  
This guide covers only user-to-user blocking. For group moderation (ban or remove members), see `lib/group_info/cometchat_group_info.dart` methods like `removeMembers` and `banMembers`.

## 11. Summary / Feature Matrix

| Feature         | File                                       | Method Used                           |
|-----------------|--------------------------------------------|---------------------------------------|
| Open User Info  | `lib/messages.dart`                        | `Navigator.push(...)`                 |
| Block User      | `lib/user_info/cometchat_user_info.dart`   | `CometChatUIKit.blockUsers([...])`    |
| Unblock User    | `lib/user_info/cometchat_user_info.dart`   | `CometChatUIKit.unblockUsers([...])`  |
| Group Members   | `lib/group_info/cometchat_group_info.dart` | `removeMembers`, `banMembers`         |

## 12. Next Steps & Further Reading

- **Full Sample App:** https://github.com/cometchat/cometchat-uikit-flutter/tree/v5/sample_app  
- **CometChat Flutter Docs:** https://prodocs.cometchat.com/docs/flutter-quickstart  
