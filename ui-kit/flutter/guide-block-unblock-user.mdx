---
title: "Implementing Block/Unblock User in Flutter with CometChat UIKit"
sidebarTitle: "Block/Unblock User"
---

## Table of Contents

1. [Overview](#overview)
2. [Prerequisites](#prerequisites)
3. [Components](#components)
4. [Integration Steps](#integration-steps)
   1. [Navigate to User Info Screen](#navigate-to-user-info-screen)
   2. [Add “Block User” Button](#add-block-user-button)
   3. [Add “Unblock User” Button](#-add-unblock-user-button)
5. [Customization Options](#customization-options)
6. [Filtering / Edge Cases](#filtering--edge-cases)
7. [Error Handling & Blocked-User Handling](#error-handling--blocked-user-handling)
8. [Optional Context-Specific Notes](#optional-context-specific-notes)
9. [Summary / Feature Matrix](#summary--feature-matrix)
10. [Next Steps & Further Reading](#next-steps--further-reading)
11. [Best Practices](#best-practices)

## Overview

The Block User feature lets one user prevent another from sending messages or interacting with them. Essential for user privacy, spam control, and moderation in public or group chats. Users tap “Block” or “Unblock,” and the CometChat SDK enforces the block state.

## Prerequisites

- Flutter project with CometChat UIKit Flutter v5 installed  
- Valid CometChat `appID`, `region`, and `authKey` initialized  
- Navigation set up between your chat list (`lib/messages.dart`) and user-info screen  

## Components

| Component                             | Role                                                    |
|---------------------------------------|---------------------------------------------------------|
| `CometChatUserInfo`                   | Displays user profile with block/unblock controls      |
| `CometChatUIKit.blockUsers([...])`      | SDK method to block specified user(s)                  |
| `CometChatUIKit.unblockUsers([...])`    | SDK method to unblock specified user(s)                |
| `ElevatedButton`                      | Flutter widget for block/unblock actions               |

## Integration Steps

### 4.1 Navigate to User Info Screen

Open the user-info screen when tapping the info icon in chat:

```dart
IconButton(
  icon: Icon(Icons.info_outline),
  onPressed: () {
    Navigator.push(
      context,
      MaterialPageRoute(
        builder: (_) => CometChatUserInfo(user: tappedUser),
      ),
    );
  },
);
```

<small>File reference: `lib/messages.dart`</small>

### 4.2 Add “Block User” Button

Add a button that blocks the target user:

```dart
ElevatedButton(
  onPressed: () async {
    try {
      await CometChatUIKit.blockUsers([user.uid]);
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text('\${user.name} has been blocked')),
      );
    } catch (e) {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text('Error blocking user: \$e')),
      );
    }
  },
  child: Text('Block User'),
);
```

<small>File reference: `lib/user_info/cometchat_user_info.dart`</small>

### 4.3 Add “Unblock User” Button

Add a button that unblocks the target user:

```dart
ElevatedButton(
  onPressed: () async {
    try {
      await CometChatUIKit.unblockUsers([user.uid]);
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text('\${user.name} has been unblocked')),
      );
    } catch (e) {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text('Error unblocking user: \$e')),
      );
    }
  },
  child: Text('Unblock User'),
);
```

<small>File reference: `lib/user_info/cometchat_user_info.dart`</small>

## Customization Options

- **Button Styling:** Use `ElevatedButton.styleFrom(...)` to customize colors, padding, and shape.  
- **Conditional Rendering:** Display “Block” or “Unblock” based on `user.blockedByMe` state.  
- **Modal Confirmation:** Wrap actions in `showDialog` for “Are you sure?” prompts.  

## Filtering / Edge Cases

- **Self-Block Prevention:** Disable the button if `user.uid == loggedInUser.uid`.  
- **Offline Users:** Optionally disable or queue actions when network is unavailable.  

## Error Handling & Blocked-User Handling

- **SnackBars:** Show success or error messages via `ScaffoldMessenger`.  
- **Retry Logic:** Offer a “Retry” action in the SnackBar on failure.  
- **UI State:** Disable the button while the SDK call is in progress to prevent duplicates.  

## Optional Context-Specific Notes

**Group vs. User Blocking:**  
This feature covers only user-to-user blocking. For group moderation (ban or remove members), see `lib/group_info/cometchat_group_info.dart` methods like `removeMembers` and `banMembers`.

## Summary / Feature Matrix

| Feature                | File                                         | Method                                      |
|------------------------|----------------------------------------------|---------------------------------------------|
| Open User Info         | `lib/messages.dart`                          | `Navigator.push(...)`                       |
| Block User             | `lib/user_info/cometchat_user_info.dart`     | `CometChatUIKit.blockUsers([...])`          |
| Unblock User           | `lib/user_info/cometchat_user_info.dart`     | `CometChatUIKit.unblockUsers([...])`        |
| Group Member Mgmt      | `lib/group_info/cometchat_group_info.dart`   | `removeMembers`, `banMembers`               |

## Next Steps & Further Reading

- **Full Sample App:**  
  https://github.com/cometchat/cometchat-uikit-flutter/tree/v5/sample_app  
- **CometChat Flutter Docs:**  
  https://prodocs.cometchat.com/docs/flutter-quickstart  
- **Group Moderation:**  
  Explore `banMembers` and `kickGroupMember` for group-level controls.  

## Best Practices

- Keep code snippets minimal and focused.  
- Explain the rationale for each step.  
- Reference exact file paths for clarity.  
- Provide actionable UI feedback (SnackBars, disabled states).  
- Guard against self-blocks and handle network errors gracefully.  
