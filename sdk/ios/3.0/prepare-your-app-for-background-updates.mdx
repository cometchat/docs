---
title: "Prepare Your App For Background Updates"
---



<Frame>
  <img src="data:image/png;base64,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" />
</Frame>

In iOS, when the user enters in the background state, real time connection breaks with the server. So, if the user comes inside the chat window or in the conversation list then it won't update the new messages received from the real time server until it's being fetched from the API.

To keep user interaction alive with the application you can add our service which keeps real time connection alive in a background state for a few seconds. If the user is constantly switching between multiple applications at the same time, this service will help to update real time updates on the UI.

## Background updates behaviour

This below table is applicable only when [these steps are followed](/sdk/ios/3.0/prepare-your-app-for-background-updates#step-1-add-background-modes-in-capabilities).

autoEstablishSocketConnection usage can be found in [Managing Web-Socket connections manually](/sdk/ios/3.0/managing-web-socket-connections-manually).

|                               | Value | Behaviour                                                                                                                                                                                                                                                |
| :----------------------------- | :----- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| autoEstablishSocketConnection | true  | Connection is maintained in background for 30 seconds and after that it is killed.                                                                                                                                                                       |
| autoEstablishSocketConnection | false | 1. If `CometChat.connect()` is called and app goes to background the connection is maintained for 30 seconds and after that connection is terminated. 2. If `CometChat.disconnect()` is called and app goes to background the connection not maintained. |

Please follow the steps to prepare your app for background states.

***

## Step 1. Add Background Modes in Capabilities

Click on Targets -> Project -> \[+ Capability] -> Add 'Background Modes' section.

<Frame>
  <img src="/images/24570afd-1637774930-ed172dfba345f0c3e5c845ac2980b618.png" />
</Frame>

***

## Step 2. Select Background modes for processing

Select 'Background Fetch' and 'Background Processing' options by ticking them.

<Frame>
  <img src="/images/03a3608b-1637775112-6db388f5d22cc1bca40196cce761e4e8.png" />
</Frame>

***

## Step 3. Add Code in Application class to configure background services for different states.

Add `CometChat.configureServices`method in application class or scene delegate class as shown below.

<Tabs>
<Tab title="Swift">
```swift
func applicationWillResignActive(_ application: UIApplication) {
        CometChat.configureServices(.willResignActive)
    }

    func applicationDidEnterBackground(_ application: UIApplication) {
        CometChat.configureServices(.didBackground)
    }
```

</Tab>

</Tabs>

<Note>

1. As per the iOS standard guidelines, this service will keep alive for few seconds in background services in the system. After few seconds it will get terminated automatically by the system.
2. This service is only available after SDK **v3.0.5x** & **UI Kit v3.0.5x -1x.**

</Note>

***

## Step 4. Check background service is running

You can check the background service is running or not using `CometChat.BackgroundTaskEnabled()` method. It will return **`true`** if service is running else it will return `false`.

<Tabs>
<Tab title="Swift">
```swift
if CometChat.backgroundTaskEnabled() {
  print("Background service is running, it will automatically update UI.")
}else{
  print("Background service is stopped, Please refresh messages or conversations here to update.")
}
```

</Tab>

</Tabs>

***
